---
author:
  name: Садыков Ильдар Ильфатович
  group: НКАбд-05-25
  student-id: 1032253506
title: "Отчет по лабораторной работе №9"
subtitle: "Архитектура компьютера"
license: "CC BY"
---
# Цель работы

Приобретение навыков написания программ с использованием подпрограмм. Знакомство с методами отладки при помощи GDB и его основными возможностями.

# Задание

1. Изучить понятие подпрограммы и механизм ее вызова в NASM.
2. Освоить написание программ с использованием инструкций call и ret.
3. Изучить основные возможности отладчика GDB.
4. Научиться отлаживать программы с использованием точек останова и пошагового выполнения.

# Выполнение лабораторной работы

## **Реализация подпрограмм в NASM:**
Создаем каталог для выполнения лабораторной работы №9 и создаем файл lab09-1.asm. Вводим текст программы с использованием подпрограммы _calcul для вычисления выражения f(x) = 2x + 7  ([рис. @fig-001]).

![Код программы lab09-1.asm с подпрограммой](image/1.1.png){#fig-001}

## **Модификация программы с вложенной подпрограммой:**
Добавляем подпрограмму _subcalcul в подпрограмму _calcul для вычисления составной функции f(g(x)) ([рис. @fig-002]).

![Код и запуск измененной программы lab09-1.asm с подпрограммой](image/1.2.png){#fig-002}

## **Отладка программы с помощью GDB:**
Создаем файл lab09-2.asm с программой вывода "Hello, world!".Компилируем программу с отладочной информацией и запускаем в GDB. Устанавливаем точку останова на метку _start и запускаем программу ([рис. @fig-003]).

![Запуск программы lab09-2 и установка точки остановки на месте _start](image/1.3.png){#fig-003}

Изучаем дизассемблированный код программы и переключаемся на синтаксис Intel ([рис. @fig-009]).

![Дизассемблирование кода в GDB](image/1.4.png){#fig-004}

## **Работа с данными в GDB:**
Просматриваем содержимое регистров и точек остановок через info breakpoints ([рис. @fig-005]).

![Открытие дополнительный вкладок информации для наблюдения за изменениями регистров и установленных точек остановок](image/1.5.png){#fig-005}

Добавляем еще одну точку остановки через адрес ([рис. @fig-006]).

![Создание точки остановки через адрес, проверка созданных точек](image/1.6.png){#fig-006}

Наблюдение за изменениями регистров после пяти шагов программы, меняются значения регистров eax,ecx,ebx,edx ([рис. @fig-007]).

![Изменение регистров после исполнения 5 строк кода через stepi](image/1.7.png){#fig-007}

Смортим на значение текстовых переменных msg1 и  msg2 через адрес, просматривая их видом x/1sb ([рис. @fig-008]).

![Значение переменных msg1 и msg2](image/1.8.png){#fig-008}

Изменяем значение переменной msg1 и msg2 через адресс, проверяем результат ([рис. @fig-009]).

![Изменение значения переменной в GDB](image/1.9.png){#fig-009}

## **Обработка аргументов командной строки в GDB:**

Изменяем значение регистра ebx на "2", а после на 2, наблюдаем что значения разные, потому что присваем значения как символ и как число ([рис. @fig-010]).

![Изменение значения переменной в GDB](image/1.a.png){#fig-010}

Создаем файл lab09-3.asm на основе программы из лабораторной работы №8. Запускаем программу в GDB с аргументами и исследуем расположение аргументов в стеке ([рис. @fig-011]).

![Исследование аргументов в стеке через GDB](image/1.b.png){#fig-011}

# Задание для самостоятельной работы

## **Программа с подпрограммой вычисления функции:**
Модифицируем программу из лабораторной работы №8, выделив вычисление функции f(x) = 2x + 15 в отдельную подпрограмму ([рис. @fig-012]).

![Код программы с подпрограммой вычисления функции](image/2.1.png){#fig-012}

## **Отладка ошибочной программы:**
Анализируем программу вычисления выражения (3+2)*4+5 с помощью GDB и находим ошибку.([рис. @fig-013]).

![Отладка ошибочной программы в GDB](image/2.2.png){#fig-013}

Исправляем ошибку и запускаем программу.([рис. @fig-014]).

![Запуск исправленной программы](image/2.3.png){#fig-014}

# Выводы

В ходе выполнения лабораторной работы были приобретены навыки написания программ с использованием подпрограмм в NASM. Изучен механизм вызова подпрограмм с помощью инструкций call и ret. Освоены основные возможности отладчика GDB, включая установку точек останова, пошаговое выполнение программ, просмотр и изменение содержимого регистров и памяти. Приобретен опыт отладки программ с использованием GDB, что позволяет эффективно находить и исправлять ошибки в программах на языке ассемблера. Полученные знания позволяют создавать более структурированные и надежные программы.

::: {#refs}
:::
